<!DOCTYPE html>
<html>
<head>
    <title>Smol Wiki</title>
    <script>
        async function loadWiki() {
            const response = await fetch(
                'https://api.github.com/repos/miguelsantosdesign/smol-wiki/contents/wiki?ref=main'
            );
            const files = await response.json();
            const list = document.getElementById('wiki-list');
            
            for (const file of files.filter(f => f.name.endsWith('.html'))) {
                const content = await fetch(file.download_url);
                const text = await content.text();
                
                // Extract title from <title> tag or <h1> tag
                const titleMatch = text.match(/<title>(.*?)<\/title>/i) || 
                                   text.match(/<h1[^>]*>(.*?)<\/h1>/i);
                const title = titleMatch ? titleMatch[1] : file.name.replace('.html', '');
                
                list.innerHTML += `
                    <li>
                        <a href="wiki/${file.name}">
                            ${title}
                        </a>
                    </li>
                `;
            }
        }
        loadWiki();
    </script>
</head>
<body>
    <h1>Smol Wiki</h1>
    <ul id="wiki-list"></ul>
</body>
</html>
